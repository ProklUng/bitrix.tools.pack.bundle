services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: true

  # Битриксовый CIBlockElement
  bitrix_ordinary_tools.ciblockelement:
    public: false
    class: CIBlockElement

  # Битриксовый CFile
  bitrix_ordinary_tools.cfile:
    public: false
    class: CFile

  # Битриксовый CUser
  bitrix_ordinary_tools.cuser:
    class: CUser

  # Битриксовый CMain
  bitrix_ordinary_tools.cmain:
    class: CMain

  bitrix_ordinary_tools.application_d7:
    factory: ['Bitrix\Main\Application', 'getInstance']
    class: CMain

  # Битриксовый кэшер
  bitrix_ordinary_tools.bitrix_cacher:
    public: false
    class: CPHPCache

  Prokl\BitrixOrdinaryToolsBundle\Services\Application\GetApplication: ~

  # $APPLICATION
  application.instance:
    class: CMain
    factory: ['@Prokl\BitrixOrdinaryToolsBundle\Services\Application\GetApplication', 'instance']

  # Обертка над CFile.
  bitrix_ordinary_tools.cfile_wrapper:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Utils\CFileWrapper
    arguments: ['@bitrix_ordinary_tools.cfile']

  iblock.element.manager:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Iblock\IblockElementManager

  iblock.property.manager:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Iblock\IBlockPropertyManager

  iblock.section.manager:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Iblock\IBlockSectionManager

  hlblock.manager:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Iblock\HLIBlockElementManager

  iblock.manager:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Iblock\IblockManager

  # Кэшер.
  bitrix_ordinary_tools.cacher:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\Cache\LegacyCacher
    arguments: ['@bitrix_ordinary_tools.bitrix_cacher']

  bitrix_ordinary_tools.custom_event_dispatcher:
    class: Prokl\BitrixOrdinaryToolsBundle\Services\SymfonyEvents\CustomEvents
    arguments:
      - '@event_dispatcher'
      - !tagged_iterator bitrix.component.event

